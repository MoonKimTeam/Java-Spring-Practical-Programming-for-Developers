# 객체의 종류

- VO란 어떤 객체일까요 ?
- DTO란 어떤 객체일까요 ?
- DAO란 어떤 객체일까요 ?
- Entity란 어떤 객체일까요 ?

## VO (Value Object: 값 객체)

```java
// 값 객체로 선언된 Color 클래스
import java.util.Objects;

public final class Color {

    public final int r;
    public final int g;
    public final int b;

    public Color(int r, int g, int b) {
        if (r < 0 || r > 255 || g < 0 || g > 255 || b < 0 || b > 255) {
            throw new IllegalArgumentException("RGB should be 0 to 255");
        }
        this.r = r;
        this.g = g;
        this.b = b;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) {
            return true;
        }
        if (o == null || getClass() != o.getClass()) {
            return false;
        }
        final Color color = (Color) o;
        return r == color.r &&
               g == color.g &&
               b == color.b;
    }

    @Override
    public int hashCode() {
        return Objects.hash(r, g, b);
    }
}

```


Color 클래스가 V0라는 것은 Color 클래스로 만들어진 객체를 숫자 1, 2, 3, 4같은 값과 같이 볼 수 있다는 의미입니다.  
즉, Color는 객체지만 동시에 값입니다. 그래서 값 객체라고 부릅니다.  

그럼 값에는 어떤 특징들이 있을까요?  
소프트웨어 설계자 입장에서 값은 불변성, 동등성, 자가 검증이라는 특징이 있습니다.

| 값의 특징 | 설명 |
|------------|------|
| 불변성 | 값은 변하지 않습니다. 예를 들어, 숫자 1은 영원히 숫자 1입니다. |
| 동등성 | 값의 가치는 항상 같습니다. 예를 들어, 모든 숫자 1은 적혀 있는 위치나 시간과 관계없이 항상 같은 숫자 1입니다. |
| 자가 검증 | 값은 그 자체로 올바릅니다. 예를 들어, 숫자 1은 그 자체로 올바른 숫자입니다. 이는 ‘1은 사실 1.01이지 않을까?’와 같은 고민을 할 필요가 없다는 의미입니다. |

### 불변성

객체의 불변성은 복잡하고 어렵게 생각할 개념이 아니기도 합니다.  
왜냐하면 객체를 진정한 의미의 불변으로 만들려고 노력하는 것은 그것 나름대로 에너지 낭비이기 때문입니다.  
VO의 불변성이라는 특징을 완벽하게 지키는 100점짜리 VO를 만들려고 노력할 필요도 없습니다.  
**중요한 것은 100점짜리 VO를 만드는 것이 아니라 불변성이 지닌 '가치를 좇는 것'입니다.**
불변성을 강조하는 이유는 간단합니다. 객체를 신뢰할 수 있게 만들기 위함입니다.  
불변성을 가진 객체는 내부 상태가 변경되지 않습니다. 덕분에 다른 객체와 협력하는 과정에서 항상 예측 가능한 방식으로 동작합니다.

### 동등성

Color 클래스는 equals와 hashCode 메서드를 오버라이딩하고 있습니다.  
이는 값이 갖고 있는 동등성이라는 가치 때문입니다.

```java
Color green1 = new Color(0, 1, 0);
Color green2 = new Color(0, 1, 0);
System.out.println(green1 == green2); // equals와 hashCode를 오버라이드하지 않으면 false가 나옴
```

green1 == green2는 두 개의 초록색 객체가 있고 두 객체가 같은지 아닌지 확인하는 코드입니다.  
의미론적으로 초록색이라는 색상은 같은 것이므로 누군가는 같다고 대답할 것입니다. 하지만 누군가는 다른 참조 값을 갖는 객체이니 다르다고 볼 것입니다.  
**VO는 이 경우에 내재된 의미가 같다면 같은것이라고 합니다.**

따라서 VO를 만들기 위해 자바에서는 객체 간 비교에 사용되는 equals나 hashCode를 오버라이딩할 필요가 있습니다.  
오버라이딩하지 않는다면 equals와 hashCode 메서드는 객체의 참조값, 즉 메모리상의 주솟값을 이용해 비교합니다.
**이는 VO의 설계 의도와 일치하지 않습니다.**

> 동등성 vs 식별자  
> **VO에는 식별자를 넣어서는 안됩니다.**  
> 즉, VO는 id 같은 식별자 필드를 멤버 변수로 가지고 있어서는 안됩니다.  
> 식별자의 정의에 따르면 id가 같으면 같은 객체로 판단해야 하는데, VO의 정의에 따르면 두 객체의 상태가 같은지 확인해야 합니다.

### 자가 검증

자가 검증이란 말 그대로 클래스 스스로 상태가 유효한지 검증할 수 있음을 의미합니다.  
즉, 유효하지 않은 상태의 객체가 만들어질 수 없다는 것을 의미합니다.

**자가 검증이 완벽한 객체라면 외부에서 이 객체를 사용할 때 상태에 이상한 값이 들어 있지는 않을지 노심초사하지 않아도 됩니다.**  
상태 검증을 위해 if-else문, try-catch 문을 사용하지 않아도 된다는 것입니다.
**따라서 VO의 생성자에는 반드시 유효한 상태 값이 들어오는지 검증하는 코드가 있어야 합니다.**

## DTO


















