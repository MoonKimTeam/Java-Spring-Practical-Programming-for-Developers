# ch.17 테스트와 개발 방벙론

- TDD: 개발자가 코드를 작성하기 전에 해당 코드의 테스트 케이스를 먼저 작성하게 한 후 해당 테스트를 통과할 수 있는 코드를 작성하는 방식으로 소프트웨어를 개발
- BDD: 소프트웨어 개발 과정에서 비즈니스 요구사항과 소프트웨어 행동을 강조하는 개발 방법론
- 테스트 케이스 명세화할 때 given-when-then 같은 자연어 구성 시나리오 사용 권장

## TDD

- Red, Green, Refactor 세 단계를 거침
    - Red 단계: 아직 구현되지 않은 기능을 테스트하는 케이스 작성
    - Green 단계: 테스트를 통과시키기 위한 최소한의 코드 작성
    - Refactor 단계: Green 단계에서 작성한 코드를 리팩터링
        - 리팩터링으로 인해 기능의 동작 방식이 변경돼서는 안 됨

## BDD

- TDD의 한계
    - TDD가 무엇을 어떻게 테스트해야 하는지 설명하지 않음
    - 객체의 기능을 테스트하려고 작성된 테스트
    - 기술적인 측면의 검증에만 집중하는 테스트
    - 작성자만 아는 형테의 테스트

- 테스트를 세분화
- Given-When-Then이라는 주석을 닮
    - '어떤 상황에서(given)', '어떤 동작이 주어질 때(when)', '요구되는 상태는 어떤 것인지(then)' 명확히 함
- 단순히 테스트를 분리하고 Given-When-Then 주석 추가한다고 해서 TDD가 BDD가 되는 것은 아님
- TDD는 객체지향을 보장하지 않음 -> DDD 등장
- BDD는 TDD를 하면서도 객체지향적인 설계를 얻기위해 만든 이론으로 TDD에 BDD를 얹은 것
    - 도메인 분석 단계에서 사용자 위주의 스토리를 만들고(DDD), 이를 바탕으로 테스트 코드를 작성해보는 것(TDD)
- 공통된 언어를 바탕으로 요구사항 문서가 사용자 스토리 기반으로 작성돼야 한다는 것을 강조
    - 서사와 시나리오등 행동 명세에 맞게 '사용자 스토리 기반 요구사항'을 작성
    - 요구사항을 뚜렷하게 명시하면서도 테스트 코드로 작성하기 편함
- BDD에서 강조하는 것
    - 개발자와 비개발자 사이의 협업
    - 핻옹명세(사용자 스토리 기반의 요구사항) 작성
    - 행동 명세의 테스트화
    - 테스트의 문서화
- 이런 흐름을 통해 개발자가 작성하는 테스트는 사용자의 행동과 행동에 따른 결과를 검증하는 테스트가 됨
    - 알고리즘이 아니라 행동과 역할을 검증하도록 함