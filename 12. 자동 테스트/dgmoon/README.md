# ch.12 자동 테스트

- 인수 테스트: 시스템을 인수인계 하기 전 시스템이 비즈니스와 일치하는지 마지막으로 검증하는 테스트 단계
    - 테스트 수행절차, 기댓값이 적힌 체크리스트로 관리
- 개발자들이 흔히 저지르는 실수는 인수 테스트 과정을 대부분 수동 테스트로만 구성하는 것
    - 수동 테스트는 너무 많은 비용이 듦
    - 휴먼 에러 발생 가능

```text
이는 '생성하기 API를 호출한 결과, A라는 응답을 줘야 한다로 대체되거나 '생성하기 API를 호출한 후 조회 API를 호출한 결과,
생성된 데이터가 있음을 확인한다로 대체할 수 있습니다. 그리고 이는 충분히 자동화할 수 있습니다.
```

- 자동 테스트의 이점
    - 코드를 변경했어도 시스템이 이전과 같은 동작 유지 보장
    - 실패 시 시스템에 버그가 생겼다는 것을 알 수 있음
    - 개발자의 부담을 줄여줌

## Regression

- Regression은 버그의 일종, 기능 개발이 제대로 돼 있지 않던 과거로 돌아갔다는 의미
- 회귀 버그를 없애려면 회귀 버그를 탐지하기 위한 회귀테스트 시행
- 자동화된 회귀 테스트를 마련하면 개발하거나 리팩터링할 때마다 기존 기능이 망가지지 않을까하는 불안감을 떨쳐내고 순간순간의 개발 활동에 집중할 수 있게 됨

## 의도

- 작성된 코드만으로는 개발자의 의도를 정확히 파악할 수 없음
- 테스트는 이런 상황에 너무나 유용함
    - 테스트는 개발자의 의도를 드러내는 최고의 방법
- 테스트를 의도를 드러내는 수단으로 바라볼수 있고 더 나아가 '책임'을 드러내는 수단으로 바라볼 수 있게 된다면 OOP에서 말하는 책임 주도설계에 더 가까워질 수 있음

```text
테스트는 그 자체로 문서가 될 수 있습니다.
테스트는 개발자의 의도를 보여주는 수단이며, 계약의 내용을 가장 구체적이고 상세히 설명할 수 있는 수단입니다.
따라서 누구나 클래스에 할당된 책임이 무엇인 지 테스트를 통해 확인할 수 있습니다.
```

## 레거시 코드

- 오래된 소프웨어 시스템에 존재하는 코드
- 단순히 코드가 오래됐다고 해서 그 코드를 유지보수하기 힘든 것이 아님
- 예상치 못한 오류를 탐지할 수단이 없어서 유지보수하기 어려운 것
- 테스트 루틴이 충분히 갖춰진 코드는 오래됐더라도 안정적이고 변경에 대응하기 쉬움